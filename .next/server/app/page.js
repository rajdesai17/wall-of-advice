(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},6715:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(7096),r=s(6132),l=s(7284),i=s.n(l),n=s(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8203)),"C:\\Users\\Raj\\wallofadvice\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5739)),"C:\\Users\\Raj\\wallofadvice\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Raj\\wallofadvice\\src\\app\\page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3602:(e,t,s)=>{Promise.resolve().then(s.bind(s,2360))},2360:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var a=s(784),r=s(9885);let components_Message=({message:e,userId:t,onPositionUpdate:s})=>(0,a.jsxs)("div",{className:"message absolute p-4 rounded-lg shadow-lg bg-white/90 backdrop-blur-sm",style:{left:e.position.x,top:e.position.y,transform:"translate(-50%, -50%)",maxWidth:"300px",minWidth:"200px",backgroundColor:e.color,zIndex:10},children:[(0,a.jsxs)("div",{className:"absolute -top-3 left-4 bg-white/50 px-2 py-0.5 rounded-full text-xs text-gray-600",children:["#",e.messageNumber]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-gray-800 whitespace-pre-wrap break-words",children:e.content}),e.author&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 italic",children:["~ ",e.author]})]})]});var l=s(1137);function MessageModal({isOpen:e,onClose:t,onSubmit:s,position:i}){let n,o;let[d,c]=(0,r.useState)("");return a.jsx(l.V,{open:e,onClose:t,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"fixed inset-0",children:[a.jsx(l.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsx("div",{className:"absolute w-full max-w-md bg-white rounded-xl shadow-lg",style:(n=i.modal.x,o=i.modal.y,n+400+20>window.innerWidth&&(n=window.innerWidth-400-20),n<20&&(n=20),o+300+20>window.innerHeight&&(o=window.innerHeight-300-20),o<20&&(o=20),{position:"fixed",left:`${n}px`,top:`${o}px`,transform:"translate(-50%, -50%)"}),children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx(l.V.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:"Add your message"}),a.jsx("textarea",{value:d,onChange:e=>c(e.target.value),className:"w-full p-4 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Write your message here... (Add #yourname at the end to sign)",rows:4,autoFocus:!0}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{onClick:()=>{let e=d.match(/(.*?)(?:#(\w+))?$/),t=e?.[1]?.trim()||d,a=e?.[2];t.trim()&&(s(t,a),c(""))},className:"px-4 py-2 text-sm text-white bg-blue-500 rounded-md hover:bg-blue-600",children:"Add Message"})]})]})})]})})}var i=s(5236);function InfoModal({isOpen:e,onClose:t}){return a.jsx(l.V,{open:e,onClose:t,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(l.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(l.V.Title,{className:"text-2xl font-medium text-gray-900 mb-4",children:"Welcome to Wall of Advice ✨"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"This is your cozy corner of the internet where strangers leave little nuggets of wisdom for each other."}),a.jsx("p",{className:"text-gray-600",children:"Like finding notes in your favorite book, or stumbling upon exactly the words you needed to hear."}),a.jsx("p",{className:"text-gray-600 italic",children:"Leave a piece of your story, take a piece of inspiration. Welcome home! ✨"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",onClick:t,children:"Got it!"})})]})]})})}function HowToModal({isOpen:e,onClose:t}){return a.jsx(l.V,{open:e,onClose:t,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(l.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(l.V.Title,{className:"text-2xl font-medium text-gray-900 mb-4",children:"How to Use \uD83D\uDCDD"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"1."}),a.jsx("p",{className:"text-gray-600",children:"Click anywhere on the wall to add your message"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"2."}),a.jsx("p",{className:"text-gray-600",children:"Write your message - it can be advice, thoughts, or just kind words"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"3."}),a.jsx("p",{className:"text-gray-600",children:"Add #yourname at the end if you want to sign it"})]}),a.jsx("p",{className:"text-gray-500 italic mt-4",children:"Press Enter to save your message, or click away to cancel"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",onClick:t,children:"Ready to Write!"})})]})]})})}let components_Wall=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({modal:{x:0,y:0},message:{x:0,y:0}}),[d,c]=(0,r.useState)(!1),[x]=(0,r.useState)(()=>""),[m,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{c(!0),fetchMessages()},[]);let fetchMessages=async()=>{try{u(!0),y(null);let e=await fetch("/api/messages");if(!e.ok)throw Error("Failed to fetch messages");let s=await e.json();Array.isArray(s)&&t(s)}catch(e){console.error("Failed to fetch messages:",e),y("Failed to load messages. Please try again later.")}finally{u(!1)}},handleWallClick=e=>{if(e.target.closest(".message"))return;let t=e.currentTarget,s=t.getBoundingClientRect(),a=t.closest(".react-transform-wrapper");if(!a)return;let r=window.getComputedStyle(a).transform,i=new DOMMatrix(r),n=i.a,d=(e.clientX-s.left+t.scrollLeft)/n,c=(e.clientY-s.top+t.scrollTop)/n;o({modal:{x:e.clientX,y:e.clientY},message:{x:d,y:c}}),l(!0)},handleAddMessage=async(s,a)=>{let r={id:crypto.randomUUID(),content:s,author:a,position:n.message,ownerId:x,color:`hsl(${360*Math.random()}, 70%, 80%)`,createdAt:Date.now(),messageNumber:e.length+1};try{t(e=>[...e,r]),l(!1);let e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw Error("Failed to add message")}catch(e){console.error("Error adding message:",e),y("Failed to add message. Please try again."),t(e=>e.filter(e=>e.id!==r.id))}};return m?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mb-4"}),a.jsx("div",{className:"text-xl text-gray-600",children:"Loading messages..."})]})}):b?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-red-600 text-center",children:[a.jsx("p",{className:"text-xl mb-4",children:b}),a.jsx("button",{onClick:()=>fetchMessages(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try Again"})]})}):d?(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden bg-gray-50",children:[(0,a.jsxs)("header",{className:"fixed top-0 left-0 w-full z-[9999] pointer-events-none",children:[a.jsx("div",{className:"absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-white/80 to-transparent"}),a.jsx("div",{className:"relative px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-8 max-w-4xl mx-auto",children:[a.jsx("button",{className:"text-sm bg-white/80 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md hover:bg-white/90 transition-colors pointer-events-auto",onClick:()=>p(!0),children:"What is Wall of Advice?"}),(0,a.jsxs)("div",{className:"text-center bg-white/80 backdrop-blur-sm px-6 py-2 rounded-2xl shadow-md",children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Words of Advice"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"made with ❤️"})]}),a.jsx("button",{className:"text-sm bg-white/80 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md hover:bg-white/90 transition-colors pointer-events-auto",onClick:()=>f(!0),children:"How to Use?"})]})})]}),a.jsx("main",{className:"h-full",children:a.jsx(i.d$,{limitToBounds:!1,minScale:.5,maxScale:2,initialScale:1,centerOnInit:!0,wheel:{step:.1},panning:{disabled:!1},doubleClick:{disabled:!0},children:s=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed bottom-6 left-6 z-[9998] flex gap-2",children:[a.jsx("button",{onClick:()=>s.zoomIn(),className:"w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50 flex items-center justify-center text-xl","aria-label":"Zoom in",children:"+"}),a.jsx("button",{onClick:()=>s.zoomOut(),className:"w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50 flex items-center justify-center text-xl","aria-label":"Zoom out",children:"-"}),a.jsx("button",{onClick:()=>s.resetTransform(),className:"w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50 flex items-center justify-center text-xl","aria-label":"Reset view",children:"↺"})]}),a.jsx(i.Uv,{wrapperStyle:{width:"100%",height:"100vh"},children:a.jsx("div",{className:"relative bg-gray-50",style:{width:"100%",height:"100%",minWidth:"3000px",minHeight:"3000px",backgroundImage:`
                      linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
                      linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)
                    `,backgroundSize:"50px 50px",transformOrigin:"center center"},onClick:handleWallClick,children:e.map(e=>a.jsx(components_Message,{message:e,userId:x,onPositionUpdate:(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,position:s}:t))}},e.id))})})]})})}),a.jsx(MessageModal,{isOpen:s,onClose:()=>l(!1),onSubmit:(e,t)=>handleAddMessage(e,t),position:n}),a.jsx(InfoModal,{isOpen:h,onClose:()=>p(!1)}),a.jsx(HowToModal,{isOpen:g,onClose:()=>f(!1)})]}):null};function Home(){return a.jsx(components_Wall,{})}},8203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=s(5153);let r=(0,a.createProxy)(String.raw`C:\Users\Raj\wallofadvice\src\app\page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,o=n}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[976,521,992],()=>__webpack_exec__(6715));module.exports=s})();