(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},6715:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=t(7096),l=t(6132),r=t(7284),n=t.n(r),i=t(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8203)),"C:\\Users\\Raj\\wallofadvice\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5739)),"C:\\Users\\Raj\\wallofadvice\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Raj\\wallofadvice\\src\\app\\page.tsx"],x="/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3602:(e,s,t)=>{Promise.resolve().then(t.bind(t,2360))},2360:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Home});var a=t(784),l=t(9885);let components_Message=({message:e,userId:s,onPositionUpdate:t})=>(0,a.jsxs)("div",{className:"absolute p-4 rounded-lg shadow-lg bg-white/90 backdrop-blur-sm",style:{left:`${e.position.x}px`,top:`${e.position.y}px`,transform:"translate(-50%, -50%)",maxWidth:"300px",minWidth:"200px",backgroundColor:e.color,zIndex:10},children:[(0,a.jsxs)("div",{className:"absolute -top-3 left-4 bg-white/50 px-2 py-0.5 rounded-full text-xs text-gray-600",children:["#",e.messageNumber]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-gray-800 whitespace-pre-wrap break-words",children:e.content}),e.author&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 italic",children:["~ ",e.author]})]})]});var r=t(1137);function MessageModal({isOpen:e,onClose:s,onSubmit:t}){let[n,i]=(0,l.useState)("");return a.jsx(r.V,{open:e,onClose:s,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(r.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(r.V.Title,{className:"text-lg font-medium text-gray-900",children:"Add your message"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=n.match(/(.*?)(?:#(\w+))?$/),l=a?.[1]?.trim()||n,r=a?.[2];l.trim()&&(t(l,r),i(""),s())},className:"mt-4",children:[a.jsx("textarea",{value:n,onChange:e=>i(e.target.value),className:"w-full p-4 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Write your message here... (Add #yourname at the end to sign)",rows:4,autoFocus:!0}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm text-white bg-blue-500 rounded-md hover:bg-blue-600",children:"Add Message"})]})]})]})]})})}var n=t(5236);function InfoModal({isOpen:e,onClose:s}){return a.jsx(r.V,{open:e,onClose:s,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(r.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(r.V.Title,{className:"text-2xl font-medium text-gray-900 mb-4",children:"Welcome to Wall of Advice ✨"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"This is your cozy corner of the internet where strangers leave little nuggets of wisdom for each other."}),a.jsx("p",{className:"text-gray-600",children:"Like finding notes in your favorite book, or stumbling upon exactly the words you needed to hear."}),a.jsx("p",{className:"text-gray-600 italic",children:"Leave a piece of your story, take a piece of inspiration. Welcome home! ✨"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",onClick:s,children:"Got it!"})})]})]})})}function HowToModal({isOpen:e,onClose:s}){return a.jsx(r.V,{open:e,onClose:s,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(r.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(r.V.Title,{className:"text-2xl font-medium text-gray-900 mb-4",children:"How to Use \uD83D\uDCDD"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"1."}),a.jsx("p",{className:"text-gray-600",children:"Click anywhere on the wall to add your message"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"2."}),a.jsx("p",{className:"text-gray-600",children:"Write your message - it can be advice, thoughts, or just kind words"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"3."}),a.jsx("p",{className:"text-gray-600",children:"Add #yourname at the end if you want to sign it"})]}),a.jsx("p",{className:"text-gray-500 italic mt-4",children:"Press Enter to save your message, or click away to cancel"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",onClick:s,children:"Ready to Write!"})})]})]})})}let components_Wall=()=>{let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!1),[i,o]=(0,l.useState)({x:0,y:0}),[c,d]=(0,l.useState)(!1),[x]=(0,l.useState)(()=>""),[m,u]=(0,l.useState)(!0),[h,p]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[b,y]=(0,l.useState)(null);(0,l.useEffect)(()=>{d(!0),fetchMessages()},[]);let fetchMessages=async()=>{try{u(!0),y(null);let e=await fetch("/api/messages");if(!e.ok)throw Error("Failed to fetch messages");let t=await e.json();Array.isArray(t)&&s(t)}catch(e){console.error("Failed to fetch messages:",e),y("Failed to load messages. Please try again later.")}finally{u(!1)}},handleWallClick=e=>{if(e.target===e.currentTarget){let s=e.currentTarget.getBoundingClientRect();o({x:e.clientX-s.left,y:e.clientY-s.top}),r(!0)}},handleAddMessage=async(e,s)=>{try{let t={content:e,author:s,position:i,createdAt:Date.now(),color:`hsl(${360*Math.random()}, 70%, 80%)`,ownerId:x};console.log("Sending message:",t);let a=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Response status:",a.status),a.ok){let e=await a.json();console.log("Response data:",e),await fetchMessages(),r(!1)}else{let e=await a.json();console.error("Error response:",e)}}catch(e){console.error("Failed to add message:",e)}};return m?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:a.jsx("div",{className:"text-xl text-gray-600",children:"Loading messages..."})}):b?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-red-600 text-center",children:[a.jsx("p",{className:"text-xl mb-4",children:b}),a.jsx("button",{onClick:()=>fetchMessages(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try Again"})]})}):c?(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden bg-gray-50",children:[a.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-sm shadow-sm",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("div",{className:"justify-self-start",children:a.jsx("button",{className:"text-sm bg-white/50 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md hover:bg-white/60 transition-colors",onClick:()=>p(!0),children:"What is Wall of Advice?"})}),(0,a.jsxs)("div",{className:"justify-self-center text-center",children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Words of Advice"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"made with ❤️"})]}),a.jsx("div",{className:"justify-self-end",children:a.jsx("button",{className:"text-sm bg-white/50 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md hover:bg-white/60 transition-colors",onClick:()=>f(!0),children:"How to Use?"})})]})})}),a.jsx("main",{className:"pt-24 h-full",children:a.jsx(n.d$,{limitToBounds:!1,minScale:.1,maxScale:2,initialScale:1,centerOnInit:!0,wheel:{step:.1},children:({zoomIn:s,zoomOut:t,resetTransform:l})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed bottom-6 left-6 z-50 flex gap-2",children:[a.jsx("button",{onClick:()=>s(),className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-50",children:"+"}),a.jsx("button",{onClick:()=>t(),className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-50",children:"-"}),a.jsx("button",{onClick:()=>l(),className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-50",children:"↺"})]}),a.jsx(n.Uv,{wrapperStyle:{width:"100%",height:"calc(100vh - 6rem)"},children:a.jsx("div",{className:"w-[10000px] h-[10000px] bg-gray-50 relative",onClick:handleWallClick,style:{backgroundImage:`
                      linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
                      linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)
                    `,backgroundSize:"50px 50px",transformOrigin:"center center"},children:e.map(e=>a.jsx(components_Message,{message:e,userId:x,onPositionUpdate:(e,s)=>{console.log("Position updated:",e,s)}},e.id))})})]})})}),a.jsx(MessageModal,{isOpen:t,onClose:()=>r(!1),onSubmit:handleAddMessage}),a.jsx(InfoModal,{isOpen:h,onClose:()=>p(!1)}),a.jsx(HowToModal,{isOpen:g,onClose:()=>f(!1)})]}):null};function Home(){return a.jsx(components_Wall,{})}},8203:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>r,default:()=>o});var a=t(5153);let l=(0,a.createProxy)(String.raw`C:\Users\Raj\wallofadvice\src\app\page.tsx`),{__esModule:r,$$typeof:n}=l,i=l.default,o=i}};var s=require("../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[976,521,992],()=>__webpack_exec__(6715));module.exports=t})();