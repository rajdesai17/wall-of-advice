(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},6715:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=s(7096),r=s(6132),n=s(7284),i=s.n(n),l=s(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8203)),"C:\\Users\\Raj\\wallofadvice\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5739)),"C:\\Users\\Raj\\wallofadvice\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Raj\\wallofadvice\\src\\app\\page.tsx"],m="/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3873:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3724,23)),Promise.resolve().then(s.t.bind(s,5365,23)),Promise.resolve().then(s.t.bind(s,4900,23)),Promise.resolve().then(s.t.bind(s,4714,23)),Promise.resolve().then(s.t.bind(s,5392,23)),Promise.resolve().then(s.t.bind(s,8898,23))},5618:(e,t,s)=>{Promise.resolve().then(s.bind(s,1642))},3602:(e,t,s)=>{Promise.resolve().then(s.bind(s,4408))},4408:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var a=s(784),r=s(9885);let n=(0,r.memo)(({message:e,userId:t,onPositionUpdate:s})=>(0,a.jsxs)("div",{className:"message absolute p-4 rounded-lg shadow-lg bg-white/90 backdrop-blur-sm transform -translate-x-1/2 -translate-y-1/2 transition-shadow hover:shadow-xl",style:{left:e.position.x,top:e.position.y,maxWidth:"300px",minWidth:"200px",backgroundColor:e.color,zIndex:10},children:[(0,a.jsxs)("div",{className:"absolute -top-3 left-4 bg-white/50 px-2 py-0.5 rounded-full text-xs text-gray-600",children:["#",e.messageNumber]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-gray-800 whitespace-pre-wrap break-words",children:e.content}),e.author&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 italic",children:["~ ",e.author]})]})]}));n.displayName="MessageComponent";var i=s(1137);function MessageModal({isOpen:e,onClose:t,onSubmit:s,position:n}){let l,o;let[d,c]=(0,r.useState)("");return a.jsx(i.V,{open:e,onClose:t,className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"fixed inset-0",children:[a.jsx(i.V.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsx("div",{className:"absolute w-full max-w-md bg-white rounded-xl shadow-lg",style:(l=n.modal.x,o=n.modal.y,l+400+20>window.innerWidth&&(l=window.innerWidth-400-20),l<20&&(l=20),o+300+20>window.innerHeight&&(o=window.innerHeight-300-20),o<20&&(o=20),{position:"fixed",left:`${l}px`,top:`${o}px`,transform:"translate(-50%, -50%)"}),children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx(i.V.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:"Add your message"}),a.jsx("textarea",{value:d,onChange:e=>c(e.target.value),className:"w-full p-4 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Write your message here... (Add #yourname at the end to sign)",rows:4,autoFocus:!0}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{onClick:()=>{let e=d.match(/(.*?)(?:#(\w+))?$/),t=e?.[1]?.trim()||d,a=e?.[2];t.trim()&&(s(t,a),c(""))},className:"px-4 py-2 text-sm text-white bg-blue-500 rounded-md hover:bg-blue-600",children:"Add Message"})]})]})})]})})}var l=s(5236);function InfoModal({isOpen:e,onClose:t}){return a.jsx(i.V,{open:e,onClose:t,className:"fixed inset-0 z-[60]",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(i.V.Overlay,{className:"fixed inset-0 bg-black/30"}),a.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"​"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(i.V.Title,{className:"text-2xl font-medium text-gray-900 mb-4",children:"Welcome to Wall of Advice ✨"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"This is your cozy corner of the internet where strangers leave little nuggets of wisdom for each other."}),a.jsx("p",{className:"text-gray-600",children:"Like finding notes in your favorite book, or stumbling upon exactly the words you needed to hear."}),a.jsx("p",{className:"text-gray-600 italic",children:"Leave a piece of your story, take a piece of inspiration. Welcome home! ✨"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",onClick:t,children:"Got it!"})})]})]})})}function HowToModal({isOpen:e,onClose:t}){return a.jsx(i.V,{open:e,onClose:t,className:"fixed inset-0 z-[60]",children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(i.V.Overlay,{className:"fixed inset-0 bg-black/30"}),a.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"​"}),(0,a.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[a.jsx(i.V.Title,{className:"text-2xl font-medium text-gray-900 mb-4",children:"How to Use \uD83D\uDCDD"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"1."}),a.jsx("p",{className:"text-gray-600",children:"Click anywhere on the wall to add your message"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"2."}),a.jsx("p",{className:"text-gray-600",children:"Write your message - it can be advice, thoughts, or just kind words"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"3."}),a.jsx("p",{className:"text-gray-600",children:"Add #yourname at the end if you want to sign it"})]}),a.jsx("p",{className:"text-gray-500 italic mt-4",children:"Press Enter to save your message, or click away to cancel"})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",onClick:t,children:"Ready to Write!"})})]})]})})}let components_Wall=()=>{let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)({modal:{x:0,y:0},message:{x:0,y:0}}),[c,m]=(0,r.useState)(!1),[x]=(0,r.useState)(()=>""),[h,u]=(0,r.useState)(!0),[g,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),v=(0,r.useCallback)(async()=>{try{u(!0),w(null);let e=await fetch("/api/messages");if(!e.ok)throw Error("Failed to fetch messages");let s=await e.json();Array.isArray(s)&&t(s)}catch(e){console.error("Failed to fetch messages:",e),w("Failed to load messages. Please try again later.")}finally{u(!1)}},[]);(0,r.useEffect)(()=>{m(!0),v()},[v]);let j=(0,r.useCallback)(e=>{if(e.target.closest(".message"))return;let t=e.currentTarget.closest(".react-transform-wrapper"),s=e.currentTarget.closest(".react-transform-component");if(!t||!s)return;let a=window.getComputedStyle(t).transform,r=new DOMMatrix(a),n=r.a,l=s.getBoundingClientRect(),o=(e.clientX-l.left)/n+5e3,c=(e.clientY-l.top)/n+5e3;d({modal:{x:e.clientX,y:e.clientY},message:{x:o,y:c}}),i(!0)},[]),handleAddMessage=async(s,a)=>{let r=crypto.randomUUID(),n={id:r,content:s,author:a,position:{x:Math.round(o.message.x),y:Math.round(o.message.y)},ownerId:x,color:`hsl(${360*Math.random()}, 70%, 80%)`,createdAt:Date.now(),messageNumber:e.length+1};try{t(e=>[...e,n]),i(!1),console.log("Sending message:",n);let e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),s=await e.json();if(!e.ok)throw console.error("Server error:",s),Error(s.details||"Failed to add message");console.log("Message saved successfully:",s),t(e=>e.map(e=>e.id===r?s:e))}catch(e){console.error("Error adding message:",e),t(e=>e.filter(e=>e.id!==r)),w("Failed to add message. Please try again.")}};return h?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mb-4"}),a.jsx("div",{className:"text-xl text-gray-600",children:"Revealing the Wall..."})]})}):y?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-red-600 text-center",children:[a.jsx("p",{className:"text-xl mb-4",children:y}),a.jsx("button",{onClick:()=>v(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try Again"})]})}):c?(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden bg-gray-50",children:[(0,a.jsxs)("header",{className:"header-container",children:[a.jsx("div",{className:"header-gradient"}),a.jsx("div",{className:"header-content",children:(0,a.jsxs)("div",{className:"header-layout",children:[a.jsx("button",{className:"header-button text-sm bg-white/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md hover:bg-white/95 transition-colors",onClick:()=>p(!0),children:"What is Wall of Advice?"}),(0,a.jsxs)("div",{className:"title-container bg-white/90 backdrop-blur-sm px-6 py-2 rounded-2xl shadow-md",children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Words of Advice"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"made with ❤️"})]}),a.jsx("button",{className:"header-button text-sm bg-white/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-md hover:bg-white/95 transition-colors",onClick:()=>f(!0),children:"How to Use?"})]})})]}),a.jsx("main",{className:"main-content",children:a.jsx(l.d$,{limitToBounds:!1,minScale:.1,maxScale:3,initialScale:.8,centerOnInit:!0,wheel:{step:.1},panning:{disabled:!1},doubleClick:{disabled:!0},smooth:!0,alignmentAnimation:{sizeX:0,sizeY:0},velocityAnimation:{sensitivity:1},initialPositionX:0,initialPositionY:0,children:s=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed bottom-6 left-6 z-[9998] flex gap-2",children:[a.jsx("button",{onClick:()=>s.zoomIn(),className:"w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50 flex items-center justify-center text-xl","aria-label":"Zoom in",children:"+"}),a.jsx("button",{onClick:()=>s.zoomOut(),className:"w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50 flex items-center justify-center text-xl","aria-label":"Zoom out",children:"-"}),a.jsx("button",{onClick:()=>s.resetTransform(),className:"w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50 flex items-center justify-center text-xl","aria-label":"Reset view",children:"↺"})]}),a.jsx(l.Uv,{wrapperStyle:{width:"100%",height:"100vh"},children:a.jsx("div",{className:"relative bg-gray-50",style:{width:"100%",height:"100%",minWidth:"10000px",minHeight:"10000px",backgroundImage:`
                      linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
                      linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)
                    `,backgroundSize:"50px 50px",transformOrigin:"center center",position:"absolute",left:"-5000px",top:"-5000px"},onClick:j,children:e.map(e=>a.jsx(n,{message:e,userId:x,onPositionUpdate:(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,position:s}:t))}},e.id))})})]})})}),a.jsx(MessageModal,{isOpen:s,onClose:()=>i(!1),onSubmit:(e,t)=>handleAddMessage(e,t),position:o}),a.jsx(InfoModal,{isOpen:g,onClose:()=>p(!1)}),a.jsx(HowToModal,{isOpen:b,onClose:()=>f(!1)})]}):null};function Home(){return a.jsx(components_Wall,{})}},1642:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(784),r=s(9885);let ErrorBoundary=class ErrorBoundary extends r.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center p-8 bg-white rounded-lg shadow-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong"}),a.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>window.location.reload(),children:"Refresh Page"})]})}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}};let n=ErrorBoundary},5739:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>RootLayout,metadata:()=>m,viewport:()=>x});var a=s(4656),r=s(6795),n=s.n(r);s(5023);var i=s(5153);let l=(0,i.createProxy)(String.raw`C:\Users\Raj\wallofadvice\src\components\ErrorBoundary.tsx`),{__esModule:o,$$typeof:d}=l,c=l.default,m={title:"Wall of Advice - Share Your Thoughts",description:"A collaborative wall where people can share advice and thoughts with each other."},x={width:"device-width",initialScale:1,themeColor:"#ffffff"};function RootLayout({children:e}){return a.jsx("html",{lang:"en",className:n().className,children:a.jsx("body",{children:a.jsx(c,{children:e})})})}},8203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=s(5153);let r=(0,a.createProxy)(String.raw`C:\Users\Raj\wallofadvice\src\app\page.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,o=l},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[811,143,521],()=>__webpack_exec__(6715));module.exports=s})();