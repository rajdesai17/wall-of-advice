"use strict";(()=>{var e={};e.id=217,e.ids=[217],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},9898:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>g,originalPathname:()=>m,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>p});var a={};t.r(a),t.d(a,{DELETE:()=>DELETE,GET:()=>GET,PATCH:()=>PATCH,POST:()=>POST});var r=t(884),o=t(6132),n=t(5492),i=t(5798);async function GET(){try{let e=await n.kv.get("wall-messages");return i.Z.json(e||[])}catch(e){return console.error("Failed to fetch messages:",e),i.Z.json({error:"Failed to fetch messages"},{status:500})}}async function POST(e){try{let s=await e.json(),t=await n.kv.get("wall-messages"),a=[...t||[],s];return await n.kv.set("wall-messages",a),i.Z.json(s,{status:201})}catch(e){return console.error("Failed to save message:",e),i.Z.json({error:"Failed to save message"},{status:500})}}async function PATCH(e){try{let{messageId:s,userId:t,updates:a}=await e.json(),r=await n.kv.get("wall-messages"),o=r||[],u=o.findIndex(e=>e.id===s);if(-1===u)return i.Z.json({error:"Message not found"},{status:404});if(o[u].ownerId!==t)return i.Z.json({error:"Unauthorized"},{status:403});return o[u]={...o[u],...a},await n.kv.set("wall-messages",o),i.Z.json(o[u])}catch(e){return i.Z.json({error:"Failed to update message"},{status:500})}}async function DELETE(e){try{let{messageId:s,userId:t}=await e.json(),a=await n.kv.get("wall-messages"),r=a||[],o=r.findIndex(e=>e.id===s);if(-1===o)return i.Z.json({error:"Message not found"},{status:404});if(r[o].ownerId!==t)return i.Z.json({error:"Unauthorized"},{status:403});return r.splice(o,1),await n.kv.set("wall-messages",r),i.Z.json({success:!0})}catch(e){return i.Z.json({error:"Failed to delete message"},{status:500})}}let u=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/messages/route",pathname:"/api/messages",filename:"route",bundlePath:"app/api/messages/route"},resolvedPagePath:"C:\\Users\\Raj\\wallofadvice\\src\\app\\api\\messages\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:c,headerHooks:g,staticGenerationBailout:p}=u,m="/api/messages/route"}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[929],()=>__webpack_exec__(9898));module.exports=t})();