"use strict";(()=>{var e={};e.id=217,e.ids=[217],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},6005:e=>{e.exports=require("node:crypto")},9898:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>g,originalPathname:()=>m,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>w});var a={};s.r(a),s.d(a,{DELETE:()=>DELETE,GET:()=>GET,PATCH:()=>PATCH,POST:()=>POST});var r=s(884),o=s(6132),n=s(5492),i=s(5798),u=s(9189);async function GET(){try{let e=await n.kv.get("wall-messages")??[];return i.Z.json(e)}catch(e){return i.Z.json({error:"Failed to fetch messages"},{status:500})}}async function POST(e){try{let t=await e.json(),s=await n.kv.get("wall-messages")??[],a={id:(0,u.Z)(),content:t.content,author:t.author,position:t.position,createdAt:Date.now(),color:t.color,messageNumber:s.length+1,ownerId:t.ownerId??(0,u.Z)()};return await n.kv.set("wall-messages",[...s,a]),i.Z.json(a,{status:201})}catch(e){return i.Z.json({error:"Failed to save message"},{status:500})}}async function PATCH(e){try{let{messageId:t,userId:s,updates:a}=await e.json(),r=await n.kv.get("wall-messages"),o=r||[],u=o.findIndex(e=>e.id===t);if(-1===u)return i.Z.json({error:"Message not found"},{status:404});if(o[u].ownerId!==s)return i.Z.json({error:"Unauthorized"},{status:403});return o[u]={...o[u],...a},await n.kv.set("wall-messages",o),i.Z.json(o[u])}catch(e){return i.Z.json({error:"Failed to update message"},{status:500})}}async function DELETE(e){try{let{messageId:t,userId:s}=await e.json(),a=await n.kv.get("wall-messages"),r=a||[],o=r.findIndex(e=>e.id===t);if(-1===o)return i.Z.json({error:"Message not found"},{status:404});if(r[o].ownerId!==s)return i.Z.json({error:"Unauthorized"},{status:403});return r.splice(o,1),await n.kv.set("wall-messages",r),i.Z.json({success:!0})}catch(e){return i.Z.json({error:"Failed to delete message"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/messages/route",pathname:"/api/messages",filename:"route",bundlePath:"app/api/messages/route"},resolvedPagePath:"C:\\Users\\Raj\\wallofadvice\\src\\app\\api\\messages\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:p,headerHooks:g,staticGenerationBailout:w}=d,m="/api/messages/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[57],()=>__webpack_exec__(9898));module.exports=s})();